package com.addiPlot.gnuplot;

public class GlobalMembersOs9
{
	///#define __STDC__ 1
	///#define __STDC_HOSTED__ 1
	///#define __GNUC__ 4
	///#define __GNUC_MINOR__ 3
	///#define __GNUC_PATCHLEVEL__ 6
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __SIZE_TYPE__ long unsigned int
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __PTRDIFF_TYPE__ long int
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __WCHAR_TYPE__ int
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __WINT_TYPE__ unsigned int
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __INTMAX_TYPE__ long int
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __UINTMAX_TYPE__ long unsigned int
	///#define __GXX_ABI_VERSION 1002
	///#define __SCHAR_MAX__ 127
	///#define __SHRT_MAX__ 32767
	///#define __INT_MAX__ 2147483647
	///#define __LONG_MAX__ 9223372036854775807L
	///#define __LONG_LONG_MAX__ 9223372036854775807LL
	///#define __WCHAR_MAX__ 2147483647
	///#define __CHAR_BIT__ 8
	///#define __INTMAX_MAX__ 9223372036854775807L
	///#define __FLT_EVAL_METHOD__ 0
	///#define __DEC_EVAL_METHOD__ 2
	///#define __FLT_RADIX__ 2
	///#define __FLT_MANT_DIG__ 24
	///#define __FLT_DIG__ 6
	///#define __FLT_MIN_EXP__ (-125)
	///#define __FLT_MIN_10_EXP__ (-37)
	///#define __FLT_MAX_EXP__ 128
	///#define __FLT_MAX_10_EXP__ 38
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __FLT_MAX__ 3.40282347e+38F
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __FLT_MIN__ 1.17549435e-38F
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __FLT_EPSILON__ 1.19209290e-7F
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __FLT_DENORM_MIN__ 1.40129846e-45F
	///#define __FLT_HAS_DENORM__ 1
	///#define __FLT_HAS_INFINITY__ 1
	///#define __FLT_HAS_QUIET_NAN__ 1
	///#define __DBL_MANT_DIG__ 53
	///#define __DBL_DIG__ 15
	///#define __DBL_MIN_EXP__ (-1021)
	///#define __DBL_MIN_10_EXP__ (-307)
	///#define __DBL_MAX_EXP__ 1024
	///#define __DBL_MAX_10_EXP__ 308
	///#define __DBL_MAX__ 1.7976931348623157e+308
	///#define __DBL_MIN__ 2.2250738585072014e-308
	///#define __DBL_EPSILON__ 2.2204460492503131e-16
	///#define __DBL_DENORM_MIN__ 4.9406564584124654e-324
	///#define __DBL_HAS_DENORM__ 1
	///#define __DBL_HAS_INFINITY__ 1
	///#define __DBL_HAS_QUIET_NAN__ 1
	///#define __LDBL_MANT_DIG__ 64
	///#define __LDBL_DIG__ 18
	///#define __LDBL_MIN_EXP__ (-16381)
	///#define __LDBL_MIN_10_EXP__ (-4931)
	///#define __LDBL_MAX_EXP__ 16384
	///#define __LDBL_MAX_10_EXP__ 4932
	///#define __DECIMAL_DIG__ 21
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __LDBL_MAX__ 1.18973149535723176502e+4932L
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __LDBL_MIN__ 3.36210314311209350626e-4932L
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __LDBL_EPSILON__ 1.08420217248550443401e-19L
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __LDBL_DENORM_MIN__ 3.64519953188247460253e-4951L
	///#define __LDBL_HAS_DENORM__ 1
	///#define __LDBL_HAS_INFINITY__ 1
	///#define __LDBL_HAS_QUIET_NAN__ 1
	///#define __DEC32_MANT_DIG__ 7
	///#define __DEC32_MIN_EXP__ (-95)
	///#define __DEC32_MAX_EXP__ 96
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC32_MIN__ 1E-95DF
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC32_MAX__ 9.999999E96DF
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC32_EPSILON__ 1E-6DF
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC32_DEN__ 0.000001E-95DF
	///#define __DEC64_MANT_DIG__ 16
	///#define __DEC64_MIN_EXP__ (-383)
	///#define __DEC64_MAX_EXP__ 384
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC64_MIN__ 1E-383DD
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC64_MAX__ 9.999999999999999E384DD
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC64_EPSILON__ 1E-15DD
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC64_DEN__ 0.000000000000001E-383DD
	///#define __DEC128_MANT_DIG__ 34
	///#define __DEC128_MIN_EXP__ (-6143)
	///#define __DEC128_MAX_EXP__ 6144
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC128_MIN__ 1E-6143DL
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC128_MAX__ 9.999999999999999999999999999999999E6144DL
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC128_EPSILON__ 1E-33DL
	//C++ TO JAVA CONVERTER NOTE: The following #define macro was replaced in-line:
	///#define __DEC128_DEN__ 0.000000000000000000000000000000001E-6143DL
	///#define __REGISTER_PREFIX__
	///#define __USER_LABEL_PREFIX__
	///#define __VERSION__ "4.3.6"
	///#define __GNUC_GNU_INLINE__ 1
	///#define _LP64 1
	///#define __LP64__ 1
	///#define __OPTIMIZE__ 1
	///#define __FINITE_MATH_ONLY__ 0
	///#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_1 1
	///#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_2 1
	///#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_4 1
	///#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_8 1
	///#define __SIZEOF_INT__ 4
	///#define __SIZEOF_LONG__ 8
	///#define __SIZEOF_LONG_LONG__ 8
	///#define __SIZEOF_SHORT__ 2
	///#define __SIZEOF_FLOAT__ 4
	///#define __SIZEOF_DOUBLE__ 8
	///#define __SIZEOF_LONG_DOUBLE__ 16
	///#define __SIZEOF_SIZE_T__ 8
	///#define __SIZEOF_WCHAR_T__ 4
	///#define __SIZEOF_WINT_T__ 4
	///#define __SIZEOF_PTRDIFF_T__ 8
	///#define __SIZEOF_POINTER__ 8
	///#define __amd64 1
	///#define __amd64__ 1
	///#define __x86_64 1
	///#define __x86_64__ 1
	///#define __k8 1
	///#define __k8__ 1
	///#define __MMX__ 1
	///#define __SSE__ 1
	///#define __SSE2__ 1
	///#define __SSE_MATH__ 1
	///#define __SSE2_MATH__ 1
	///#define __gnu_linux__ 1
	///#define __linux 1
	///#define __linux__ 1
	///#define linux 1
	///#define __unix 1
	///#define __unix__ 1
	///#define unix 1
	///#define __ELF__ 1
	///#define __DECIMAL_BID_FORMAT__ 1
	///#define HAVE_CONFIG_H 1
	///#define BINDIR "/usr/local/bin"
	///#define X11_DRIVER_DIR "/usr/local/libexec/gnuplot/4.4"
	///#define GNUPLOT_PS_DIR "/usr/local/share/gnuplot/4.4/PostScript"
	///#define GNUPLOT_JS_DIR "/usr/local/share/gnuplot/4.4/js"
	///#define GNUPLOT_LUA_DIR "/usr/local/share/gnuplot/4.4/lua"
	///#define CONTACT "gnuplot-bugs@lists.sourceforge.net"
	///#define HELPFILE "/usr/local/share/gnuplot/4.4/gnuplot.gih"
	///#define GNUPLOT_X11 "gnuplot_x11"
	///#define XAPPLRESDIR "/etc/X11/app-defaults/"

	/* $Id: os9.c,v 1.4 2004/07/25 12:25:01 broeker Exp $ */

	/* GNUPLOT - os9.c */

	/*[
	 * Copyright 1986 - 1993, 1998, 2004   Thomas Williams, Colin Kelley
	 *
	 * Permission to use, copy, and distribute this software and its
	 * documentation for any purpose with or without fee is hereby granted,
	 * provided that the above copyright notice appear in all copies and
	 * that both that copyright notice and this permission notice appear
	 * in supporting documentation.
	 *
	 * Permission to modify the software is granted, but not the right to
	 * distribute the complete modified source code.  Modifications are to
	 * be distributed as patches to the released version.  Permission to
	 * distribute binaries produced by compiling modified sources is granted,
	 * provided you
	 *   1. distribute the corresponding source modifications from the
	 *    released version in the form of a patch file along with the binaries,
	 *   2. add special version identification to distinguish your version
	 *    in addition to the base release version number,
	 *   3. provide your name and address as the primary contact for the
	 *    support of your modified version, and
	 *   4. retain our contact information in regard to use of the base
	 *    software.
	 * Permission to distribute the released version of the source code along
	 * with corresponding source modifications in the form of a patch file is
	 * granted with same provisions 2 through 4 for binary distributions.
	 *
	 * This software is provided "as is" without express or implied warranty
	 * to the extent permitted by applicable law.
	]*/


	/*
	 * Some Unix like functions that gnuplot uses.
	 * Original sources from the blars lib.
	 */


	///#ifdef PIPES
	//
	// /* Original version by Robert A. Larson */
	// /* Adapted by M.N. Schipper */
	//
	///#include <string.h>
	///#include <module.h>
	//
	//extern char *_environ;
	//extern int os9fork();
	//extern mh_com *modlink();
	//extern mh_com *modloadp();
	//
	//static int proc[_NFILE];
	//static mh_com *loadmods[_NFILE];
	//
	//FILE *
	//popen(char *command, char *mode)
	//{
	//    int temp, fd;
	//    FILE *pipe;
	//    char *argv[4];
	//    char *cp;
	//    mh_com *mod;
	//    int linked = 0;
	//
	//    if(mode[1]!='\0' || (*mode!='r' && *mode!='w'))
	//	return (FILE *)NULL;
	//    fd = (*mode=='r');
	//    if((temp = dup(fd)) <= 0)
	//	return (FILE *)NULL;
	//    if((pipe = fopen("/pipe", "r+")) == NULL) {
	//    	close(temp);
	//    	return (FILE *)NULL;
	//    }
	//    close(fd);
	//    dup(fileno(pipe));
	//
	//    if (strrchr (command, '/') == NULL)
	//	mod = modlink (command, 0);
	//    else
	//	mod = (mh_com *) -1;
	//    if (mod == (mh_com *) -1)
	//	loadmods[fileno(pipe)] = mod = modloadp (command, 0, NULL);
	//    else {
	//	linked = 1;
	//	loadmods[fileno(pipe)] = (mh_com *) -1;
	//    }
	//
	//    argv[0] = "shell";
	//    if (mod != (mh_com *) -1) {
	//	argv[1] = "ex";
	//	argv[2] = command;
	//	argv[3] = (char *)NULL;
	//    } else {
	//	argv[1] = command;
	//	argv[2] = (char *)NULL;
	//    }
	//    if((proc[fileno(pipe)] = os9exec(os9fork, argv[0], argv, _environ, 0, 0))
	//       < 0) {
	//	fclose(pipe);
	//	pipe = NULL;
	//    }
	//    close(fd);
	//    dup(temp);
	//    close(temp);
	//    if (linked && mod != (mh_com *) -1)
	//	munlink (mod);
	//    return pipe;
	//}
	//
	//int
	//pclose(FILE *pipe)
	//{
	//    int p, stat, w;
	//
	//    if((p = proc[fileno(pipe)]) <= 0)
	//	return -1;
	//    proc[fileno(pipe)] = 0;
	//    fflush(pipe);
	//    if (loadmods[fileno(pipe)] != (mh_com *) -1)
	//	munlink (loadmods[fileno(pipe)]);
	//    fclose(pipe);
	//    while((w=wait(&stat)) != -1 && w!=p)
	//	;			// do nothing 
	//
	//    return w==-1 ? -1 : stat;
	//}
	//
	///#endif	// PIPES 


	public static int isatty(int f)
	{
		sgbuf sgbuf = new sgbuf();

		if (_gs_opt(f, sgbuf) < 0)
			return -1;
		return sgbuf.sg_class == 0;
	}


	public static String getwd(String p)
	{
//C++ TO JAVA CONVERTER TODO TASK: Pointer arithmetic is detected on this variable, so pointers on this variable are left unchanged.
		byte * cp;
//C++ TO JAVA CONVERTER TODO TASK: Pointer arithmetic is detected on this variable, so pointers on this variable are left unchanged.
		dirent * dp = new dirent();
		int l;
		int olddot = 0;
		int i;
		int d;
		int dot;
		int dotdot;
		dirent[] db = new dirent[8];
		String buf = new String(new char[1024]);

		cp = buf.charAt(1024 - 1);
		*cp = (byte)'\0';
		for (;;)
		{
		if ((d = open(".", S_IREAD | S_IFDIR)) < 0)
		{
			if (*cp)
				chdir(cp + 1);
			return DefineConstants.NULL;
		}
//C++ TO JAVA CONVERTER TODO TASK: There is no Java equivalent to 'sizeof':
		if ((i = read(d, (String)db, sizeof(db))) == 0)
		{
			if (*cp)
				chdir(cp + 1);
			close(d);
			return DefineConstants.NULL;
		}
		dotdot = db[0].dir_addr;
		dot = db[1].dir_addr;
		if (olddot != 0)
		{
//C++ TO JAVA CONVERTER TODO TASK: There is no Java equivalent to 'sizeof':
			i -= 2 * sizeof(GlobalMembersMouse.struct dirent);
			dp = db[2];
			for (;;)
			{
				if (i <= 0)
				{
//C++ TO JAVA CONVERTER TODO TASK: There is no Java equivalent to 'sizeof':
				if ((i = read(d, (String) db, sizeof(db))) == 0)
				{
				if (*cp)
					chdir(cp + 1);
				close(d);
				return DefineConstants.NULL;
				}
				dp = db[0];
				}
			if (olddot == dp.dir_addr)
			{
				l = dp.dir_name.length();
				/* last character has parity bit set... */
				*--cp = dp.dir_name[--l] & 0x7f;
				while (l != 0)
				*--cp = dp.dir_name[--l];
				*--cp = (byte)'/';
				break;
			}
//C++ TO JAVA CONVERTER TODO TASK: There is no Java equivalent to 'sizeof':
			i -= sizeof(GlobalMembersMouse.struct dirent);
			dp++;
			}
		}
		if (dot == dotdot)
		{
			if (*cp)
				chdir(cp + 1);
			p = '/';
			if (_gs_devn(d, p + 1) < 0)
			{
				close(d);
			return DefineConstants.NULL;
			}
			close(d);
			p += cp;
			return p;
		}
		close(d);
		if (chdir("..") != 0)
		{
			if (*cp)
				chdir(cp + 1);
			return DefineConstants.NULL;
		}
		olddot = dot;
		}
	}
}